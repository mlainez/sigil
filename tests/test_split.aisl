(module test_split
  (import string_utils)
  (fn split_get text string delim string idx int -> string
    (ret (array_get (split text delim) idx)))
  
  (test-spec split_get
    (case "get first element"
      (input "one,two,three" "," 0)
      (expect "one"))
    (case "get second element"
      (input "one,two,three" "," 1)
      (expect "two"))
    (case "get third element"
      (input "one,two,three" "," 2)
      (expect "three")))
  
  (meta-note "Tests split and array_get"))