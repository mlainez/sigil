(module test_clamp
  (fn clamp x int min_val int max_val int -> int
    (set too_low bool (call lt x min_val))
    (if too_low
      (ret min_val))
    (set too_high bool (call gt x max_val))
    (if too_high
      (ret max_val))
    (ret x))
  
  (test-spec clamp
    (case "returns value when in range"
      (input 5 0 10)
      (expect 5))
    (case "clamps to min when too low"
      (input -5 0 10)
      (expect 0))
    (case "clamps to max when too high"
      (input 15 0 10)
      (expect 10))
    (case "handles exact min value"
      (input 0 0 10)
      (expect 0))
    (case "handles exact max value"
      (input 10 0 10)
      (expect 10)))
  
  (meta-note "Tests inline clamp function - constrains value to range"))
