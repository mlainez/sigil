(module test_split
  (import string_utils)
  (fn split input string delim string -> array
    (ret (split input delim)))
  
  (fn get_first_element input string delim string -> string
    (ret (array_get (split input delim) 0)))
  
  (test-spec get_first_element
    (case "split by comma first element"
      (input "apple,banana,cherry" ",")
      (expect "apple"))
    (case "split by space first element"
      (input "hello world from AISL" " ")
      (expect "hello"))
    (case "split by double colon first element"
      (input "one::two::three" "::")
      (expect "one")))
  
  (fn count_split_parts input string delim string -> int
    (ret (len (split input delim))))
  
  (test-spec count_split_parts
    (case "split by comma count"
      (input "apple,banana,cherry" ",")
      (expect 3))
    (case "split by space count"
      (input "hello world from AISL" " ")
      (expect 4))
    (case "split by double colon count"
      (input "one::two::three" "::")
      (expect 3))
    (case "no delimiter found"
      (input "nodelimiter" ",")
      (expect 1)))
  
  (meta-note "Tests split for splitting strings by various delimiters"))
