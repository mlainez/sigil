(module test
  (fn count_with_side_effect limit int -> int
    (set counter int 0)
    (if (lt counter limit)
      (set counter int (add counter 1)))
    (if (lt counter limit)
      (set counter int (add counter 1)))
    (if (lt counter limit)
      (set counter int (add counter 1)))
    (if (lt counter limit)
      (set counter int (add counter 1)))
    (if (lt counter limit)
      (set counter int (add counter 1)))
    (ret counter))
  
  (test-spec count_with_side_effect
    (case "count to 5"
      (input 5)
      (expect 5))
    (case "count to 3"
      (input 3)
      (expect 3)))
  
  (meta-note "Tests sequential conditional operations using if statements"))