(module test_if_ret
  (fn test_if_return x int -> string
    (set is_100 bool (call eq x 100))
    (if is_100
      (ret "one hundred"))
    (ret "not one hundred"))
  
  (test-spec test_if_return
    (case "returns 'one hundred' when x is 100"
      (input 100)
      (expect "one hundred"))
    (case "returns 'not one hundred' when x is not 100"
      (input 99)
      (expect "not one hundred"))
    (case "returns 'not one hundred' for negative numbers"
      (input -5)
      (expect "not one hundred")))
  
  (meta-note "CRITICAL: Tests nested return in if blocks - regression test for fixed compiler bug"))
