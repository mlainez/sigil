(module test_break
  (fn test_break_in_while -> int
    (set i int 0)
    (set sum int 0)
    (while (lt i 100)
      (set sum int (add sum i))
      (set i int (add i 1))
      (if (eq i 5)
        (break)))
    (ret sum))

  (test-spec test_break_in_while
    (case "break at i=5, sum should be 0+1+2+3+4=10"
      (input)
      (expect 10)))

  (fn test_break_in_loop -> int
    (set count int 0)
    (loop
      (set count int (add count 1))
      (if (gt count 10)
        (break)))
    (ret count))

  (test-spec test_break_in_loop
    (case "break when count > 10"
      (input)
      (expect 11)))
  
  (meta-note "Tests break statement in while loops and infinite loops"))
