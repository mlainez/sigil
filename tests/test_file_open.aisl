(mod test_file_io
  (fn open_file_for_write filepath string mode int -> int
    (ret (call io_file_open filepath mode)))
  
  (test-spec open_file_for_write
    (case "open file in write mode"
      (mock (io_file_open "/tmp/test.txt" 1) 3)
      (input "/tmp/test.txt" 1)
      (expect 3))
    (case "open file in read mode"
      (mock (io_file_open "/tmp/test.txt" 0) 4)
      (input "/tmp/test.txt" 0)
      (expect 4)))
  
  (meta-note "Tests file opening with different modes. Mode 0 is read, mode 1 is write. Returns file descriptor."))
