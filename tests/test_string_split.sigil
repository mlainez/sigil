(module test_split
  (import string_utils)
  
  (fn get_first_element text_input string delim string -> string
    (ret (array_get (split text_input delim) 0)))
  
  (test-spec get_first_element
    (case "split by comma first element"
      (input "apple,banana,cherry" ",")
      (expect "apple"))
    (case "split by space first element"
      (input "hello world from Sigil" " ")
      (expect "hello"))
    (case "split by double colon first element"
      (input "one::two::three" "::")
      (expect "one")))
  
  (fn count_split_parts text_input string delim string -> int
    (ret (array_length (split text_input delim))))
  
  (test-spec count_split_parts
    (case "split by comma count"
      (input "apple,banana,cherry" ",")
      (expect 3))
    (case "split by space count"
      (input "hello world from Sigil" " ")
      (expect 4))
    (case "split by double colon count"
      (input "one::two::three" "::")
      (expect 3))
    (case "no delimiter found"
      (input "nodelimiter" ",")
      (expect 1)))
  
  (meta-note "Tests split for splitting strings by various delimiters"))
