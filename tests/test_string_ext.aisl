(mod test_string_ext
  (fn starts_with msg string prefix string -> bool
    (ret (call string_starts_with msg prefix)))
  
  (test-spec starts_with
    (case "starts with Hello"
      (input "Hello World" "Hello")
      (expect 1))
    (case "does not start with World"
      (input "Hello World" "World")
      (expect 0)))
  
  (fn ends_with msg string suffix string -> bool
    (ret (call string_ends_with msg suffix)))
  
  (test-spec ends_with
    (case "ends with World"
      (input "Hello World" "World")
      (expect 1))
    (case "does not end with Hello"
      (input "Hello World" "Hello")
      (expect 0)))
  
  (fn to_upper msg string -> string
    (ret (call string_to_upper msg)))
  
  (test-spec to_upper
    (case "convert to uppercase"
      (input "Hello World")
      (expect "HELLO WORLD"))
    (case "already uppercase"
      (input "TEST")
      (expect "TEST")))
  
  (fn to_lower msg string -> string
    (ret (call string_to_lower msg)))
  
  (test-spec to_lower
    (case "convert to lowercase"
      (input "Hello World")
      (expect "hello world"))
    (case "already lowercase"
      (input "test")
      (expect "test")))
  
  (meta-note "Tests string extension functions: starts_with, ends_with, to_upper, to_lower"))
