(module test_polymorphic_ops
  (fn test_print x int y int z string b bool -> int
    (print x)
    (print y)
    (print z)
    (print b)
    (ret 0))

  (fn test_array arr string -> int
    (array_push arr 42)
    (array_push arr 99)
    (set size int (array_length arr))
    (print size)
    (set val int (array_get arr 0))
    (ret val))

  (fn test_string s string -> int
    (set length int (string_length s))
    (print length)
    (ret length))

  (fn test_math x int -> int
    (set result int (add x 10))
    (print result)
    (ret result))

  (test-spec test_print
    (case "print various types"
      (input 42 100 "hello" true)
      (expect 0)))

  (test-spec test_array
    (case "array operations"
      (input (array_new))
      (expect 42)))

  (test-spec test_string
    (case "string length"
      (input "hello")
      (expect 5)))

  (test-spec test_math
    (case "basic addition"
      (input 5)
      (expect 15)))
  
  (meta-note "Tests polymorphic operations: print works with multiple types, len works with strings and arrays"))
