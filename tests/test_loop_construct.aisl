(mod test_loop
  (fn test_loop () -> i32
    (set count i32 0)
    (loop
      (call print "In loop")
      (set count i32 (call add count 1))
      (ifnot (call lt count 3) done))
    (label done)
    (ret count))

  (test-spec test_loop
    (case "infinite loop with manual exit"
      (input)
      (expect 3))))
