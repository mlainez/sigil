(module test_file_io
  (fn test_write_and_read -> int
    (set path string "/tmp/aisl_test_file_io.txt")
    (file_write path "Hello from AISL!")
    (set content string (file_read path))
    (set matches bool (string_equals content "Hello from AISL!"))
    (file_delete path)
    (if matches
      (ret 1))
    (ret 0))

  (fn test_file_exists_after_write -> int
    (set path string "/tmp/aisl_test_exists.txt")
    (file_write path "test")
    (set exists bool (file_exists path))
    (file_delete path)
    (if exists
      (ret 1))
    (ret 0))

  (fn test_file_delete -> int
    (set path string "/tmp/aisl_test_delete.txt")
    (file_write path "temp")
    (file_delete path)
    (set exists bool (file_exists path))
    (if (not exists)
      (ret 1))
    (ret 0))

  (fn test_file_append -> int
    (set path string "/tmp/aisl_test_append.txt")
    (file_write path "line1")
    (file_append path "\nline2")
    (set content string (file_read path))
    (set expected string "line1\nline2")
    (set matches bool (string_equals content expected))
    (file_delete path)
    (if matches
      (ret 1))
    (ret 0))

  (test-spec test_write_and_read
    (case "writes and reads back content"
      (input)
      (expect 1)))

  (test-spec test_file_exists_after_write
    (case "file exists after write"
      (input)
      (expect 1)))

  (test-spec test_file_delete
    (case "file gone after delete"
      (input)
      (expect 1)))

  (test-spec test_file_append
    (case "appends to existing file"
      (input)
      (expect 1)))

  (meta-note "Tests file I/O operations: write, read, exists, delete, append"))
