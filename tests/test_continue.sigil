(module test_continue
  (fn test_continue_in_while -> int
    (set i int 0)
    (set sum int 0)
    (while (lt i 10)
      (set i int (add i 1))
      (if (eq i 3)
        (continue))
      (set sum int (add sum i)))
    (ret sum))

  (test-spec test_continue_in_while
    (case "sum 1 to 10 except 3"
      (input)
      (expect 52)))

  (fn test_continue_in_loop -> int
    (set i int 0)
    (set count int 0)
    (loop
      (set i int (add i 1))
      (if (gt i 10)
        (break))
      (if (eq i 5)
        (continue))
      (set count int (add count 1)))
    (ret count))

  (test-spec test_continue_in_loop
    (case "count iterations except when i=5"
      (input)
      (expect 9)))
  
  (meta-note "Tests continue statement in while loops and infinite loops"))
