(mod test_result_file_io
  (fn safe_file_read ((path string)) -> i32
    (set result string (call file_read_result path))
    (set success bool (call is_ok result))
    (if success
      (ret 1))
    (ret 0))
  
  (fn read_nonexistent_file () -> i32
    (set result string (call file_read_result "/nonexistent/file/path.txt"))
    (set is_error bool (call is_err result))
    (if is_error
      (ret 1))
    (ret 0))
  
  (test-spec read_nonexistent_file
    (case "file_read_result returns error for nonexistent file"
      (input)
      (expect 1)))
  
  (fn safe_file_write ((path string) (content string)) -> i32
    (set result string (call file_write_result path content))
    (set success bool (call is_ok result))
    (if success
      (ret 1))
    (ret 0))
  
  (meta-note "Tests result type: safe file I/O with error handling"))
