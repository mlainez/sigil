(mod test_llm_simple
  (fn main -> int
    (call print "Testing Ollama connection...")
    
    (set simple_prompt string "Write hello in AISL")
    (set json string "{\"model\":\"codellama\",\"prompt\":\"")
    (set json string (call string_concat json simple_prompt))
    (set json string (call string_concat json "\",\"stream\":false}"))
    
    (call print "JSON request:")
    (call print json)
    
    (call print "\nCalling Ollama...")
    (set url string "http://192.168.0.30:11434/api/generate")
    (set response string (call http_post url json))
    
    (call print "\nRaw response:")
    (call print response)
    
    (call file_write "ollama_response.json" response)
    (call print "\nResponse saved to ollama_response.json")
    
    (ret 0)))
